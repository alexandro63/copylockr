{"version":3,"file":"copylockr.js","sources":["../src/copylockr.js"],"sourcesContent":["(function (root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    define([], factory);\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    module.exports = factory();\r\n  } else {\r\n    root.CopyLockr = factory();\r\n  }\r\n}(typeof self !== 'undefined' ? self : this, function () {\r\n  'use strict';\r\n\r\n  var CopyLockr = {\r\n    enabled: false,\r\n    version: '2.0.0',\r\n    settings: {\r\n      disableContextMenu: true,\r\n      disableCopy: true,\r\n      disableCut: true,\r\n      disableDrag: true,\r\n      disableSelect: true,\r\n      disableDevTools: true,\r\n      password: null,\r\n      customStyles: true,\r\n      debug: false,\r\n      onBlock: null\r\n    },\r\n    \r\n    _styleElement: null,\r\n    _observer: null,\r\n    \r\n    _handleEvent: function(e) {\r\n      if (this.settings.onBlock) {\r\n        this.settings.onBlock(e.type, e);\r\n      }\r\n      \r\n      if (this.settings.debug) {\r\n        console.log('Blocked event:', e.type);\r\n      }\r\n      \r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      return false;\r\n    },\r\n\r\n    _handleKeydown: function(e) {\r\n      var ctrlOrMeta = e.ctrlKey || e.metaKey;\r\n      var blockedCombinations = [\r\n        ctrlOrMeta && e.keyCode === 85,  // Ctrl+U\r\n        e.keyCode === 123,               // F12\r\n        ctrlOrMeta && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74 || e.keyCode === 67) // DevTools\r\n      ];\r\n\r\n      if (blockedCombinations.some(Boolean)) {\r\n        this._handleEvent(e);\r\n      }\r\n    },\r\n\r\n    _applyStyles: function() {\r\n      if (this.settings.disableSelect && this.settings.customStyles) {\r\n        this._styleElement = document.createElement('style');\r\n        this._styleElement.textContent = `\r\n          body * {\r\n            -webkit-user-select: none !important;\r\n            -moz-user-select: none !important;\r\n            -ms-user-select: none !important;\r\n            user-select: none !important;\r\n          }\r\n          img, [data-copylockr-allow] {\r\n            -webkit-user-drag: none !important;\r\n            -moz-user-drag: none !important;\r\n            -ms-user-drag: none !important;\r\n            user-drag: none !important;\r\n          }\r\n        `;\r\n        document.head.appendChild(this._styleElement);\r\n      }\r\n    },\r\n\r\n    _observeDOM: function() {\r\n      if (this.settings.disableSelect) {\r\n        this._observer = new MutationObserver(function(mutations) {\r\n          mutations.forEach(function(mutation) {\r\n            Array.from(mutation.addedNodes).forEach(function(node) {\r\n              if (node.nodeType === 1) { // Element node\r\n                node.style.userSelect = 'none';\r\n              }\r\n            });\r\n          });\r\n        });\r\n\r\n        this._observer.observe(document.body, {\r\n          childList: true,\r\n          subtree: true\r\n        });\r\n      }\r\n    },\r\n\r\n    _attachListeners: function() {\r\n      var events = {\r\n        contextmenu: this.settings.disableContextMenu,\r\n        copy: this.settings.disableCopy,\r\n        cut: this.settings.disableCut,\r\n        dragstart: this.settings.disableDrag\r\n      };\r\n\r\n      Object.entries(events).forEach(([event, enabled]) => {\r\n        if (enabled) document.addEventListener(event, this._handleEvent.bind(this), true);\r\n      });\r\n\r\n      if (this.settings.disableDevTools) {\r\n        document.addEventListener('keydown', this._handleKeydown.bind(this), true);\r\n      }\r\n    },\r\n\r\n    _detachListeners: function() {\r\n      document.removeEventListener('contextmenu', this._handleEvent, true);\r\n      document.removeEventListener('copy', this._handleEvent, true);\r\n      document.removeEventListener('cut', this._handleEvent, true);\r\n      document.removeEventListener('dragstart', this._handleEvent, true);\r\n      document.removeEventListener('keydown', this._handleKeydown, true);\r\n      \r\n      if (this._styleElement) {\r\n        document.head.removeChild(this._styleElement);\r\n        this._styleElement = null;\r\n      }\r\n      \r\n      if (this._observer) {\r\n        this._observer.disconnect();\r\n        this._observer = null;\r\n      }\r\n    },\r\n\r\n    _validatePassword: function(password) {\r\n      if (this.settings.password && this.settings.password !== password) {\r\n        throw new Error('Invalid password');\r\n      }\r\n      return true;\r\n    },\r\n\r\n    enable: function(options) {\r\n      Object.assign(this.settings, options);\r\n      \r\n      if (this.enabled) this.disable();\r\n      \r\n      this._applyStyles();\r\n      this._observeDOM();\r\n      this._attachListeners();\r\n      this.enabled = true;\r\n    },\r\n\r\n    disable: function(password) {\r\n      try {\r\n        this._validatePassword(password);\r\n        this._detachListeners();\r\n        this.enabled = false;\r\n        return true;\r\n      } catch (e) {\r\n        if (this.settings.debug) console.error(e.message);\r\n        return false;\r\n      }\r\n    },\r\n\r\n    toggle: function(state, password) {\r\n      if (typeof state === 'boolean') {\r\n        return state ? this.enable() : this.disable(password);\r\n      }\r\n      return this[this.enabled ? 'disable' : 'enable'](password);\r\n    },\r\n\r\n    updateSettings: function(newSettings) {\r\n      Object.assign(this.settings, newSettings);\r\n      if (this.enabled) {\r\n        this.disable();\r\n        this.enable();\r\n      }\r\n    }\r\n  };\r\n\r\n  return CopyLockr;\r\n}));"],"names":["this"],"mappings":"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"}